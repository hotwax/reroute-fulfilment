/*!
  * @intlify/core v9.1.6
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
const e=/\{([0-9a-zA-Z]+)\}/g;const t=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),n=e=>"number"==typeof e&&isFinite(e),r=e=>"[object RegExp]"===b(e),o=e=>h(e)&&0===Object.keys(e).length;function a(e,t){"undefined"!=typeof console&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const l=Object.assign;function s(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const c=Object.prototype.hasOwnProperty;function i(e,t){return c.call(e,t)}const u=Array.isArray,f=e=>"function"==typeof e,m=e=>"string"==typeof e,p=e=>"boolean"==typeof e,g=e=>null!==e&&"object"==typeof e,d=Object.prototype.toString,b=e=>d.call(e),h=e=>"[object Object]"===b(e),_=[];_[0]={w:[0],i:[3,0],"[":[4],o:[7]},_[1]={w:[1],".":[2],"[":[4],o:[7]},_[2]={w:[2],i:[3,0],0:[3,0]},_[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},_[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},_[5]={"'":[4,0],o:8,l:[5,0]},_[6]={'"':[4,0],o:8,l:[6,0]};const k=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function w(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function y(e){const t=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(k.test(t)?function(e){const t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}(t):"*"+t)}function F(e){const t=[];let n,r,o,a,l,s,c,i=-1,u=0,f=0;const m=[];function p(){const t=e[i+1];if(5===u&&"'"===t||6===u&&'"'===t)return i++,o="\\"+t,m[0](),!0}for(m[0]=()=>{void 0===r?r=o:r+=o},m[1]=()=>{void 0!==r&&(t.push(r),r=void 0)},m[2]=()=>{m[0](),f++},m[3]=()=>{if(f>0)f--,u=4,m[0]();else{if(f=0,void 0===r)return!1;if(r=y(r),!1===r)return!1;m[1]()}};null!==u;)if(i++,n=e[i],"\\"!==n||!p()){if(a=w(n),c=_[u],l=c[a]||c.l||8,8===l)return;if(u=l[0],void 0!==l[1]&&(s=m[l[1]],s&&(o=n,!1===s())))return;if(7===u)return t}}const C=new Map;function v(e,t){if(!g(e))return null;let n=C.get(t);if(n||(n=F(t),n&&C.set(t,n)),!n)return null;const r=n.length;let o=e,a=0;for(;a<r;){const e=o[n[a]];if(void 0===e)return null;o=e,a++}return o}function W(e){if(!g(e))return e;for(const t in e)if(i(e,t))if(t.includes(".")){const n=t.split("."),r=n.length-1;let o=e;for(let e=0;e<r;e++)n[e]in o||(o[n[e]]={}),o=o[n[e]];o[n[r]]=e[t],delete e[t],g(o[n[r]])&&W(o[n[r]])}else g(e[t])&&W(e[t]);return e}const $=e=>e,O=e=>"",M="text",S=e=>0===e.length?"":e.join(""),j=e=>null==e?"":u(e)||h(e)&&e.toString===d?JSON.stringify(e,null,2):String(e);function E(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function I(e={}){const t=e.locale,r=function(e){const t=n(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(n(e.named.count)||n(e.named.n))?n(e.named.count)?e.named.count:n(e.named.n)?e.named.n:t:t}(e),o=g(e.pluralRules)&&m(t)&&f(e.pluralRules[t])?e.pluralRules[t]:E,a=g(e.pluralRules)&&m(t)&&f(e.pluralRules[t])?E:void 0,l=e.list||[],s=e.named||{};n(e.pluralIndex)&&function(e,t){t.count||(t.count=e),t.n||(t.n=e)}(r,s);function c(t){const n=f(e.messages)?e.messages(t):!!g(e.messages)&&e.messages[t];return n||(e.parent?e.parent.message(t):O)}const i=h(e.processor)&&f(e.processor.normalize)?e.processor.normalize:S,u=h(e.processor)&&f(e.processor.interpolate)?e.processor.interpolate:j,p={list:e=>l[e],named:e=>s[e],plural:e=>e[o(r,e.length,a)],linked:(t,n)=>{const r=c(t)(p);return m(n)?(o=n,e.modifiers?e.modifiers[o]:$)(r):r;var o},message:c,type:h(e.processor)&&m(e.processor.type)?e.processor.type:"text",interpolate:u,normalize:i};return p}function N(e,t,n={}){const{domain:r}=n,o=new SyntaxError(String(e));return o.code=e,t&&(o.location=t),o.domain=r,o}const R="i18n:init";let x=null;function L(e){x=e}function T(){return x}function P(e,t,n){x&&x.emit(R,{timestamp:Date.now(),i18n:e,version:t,meta:n})}const A=D("function:translate");function D(e){return t=>x&&x.emit(e,t)}const z={0:"Not found '{key}' key in '{locale}' locale messages.",1:"Fall back to translate '{key}' key with '{target}' locale.",2:"Cannot format a number value due to not supported Intl.NumberFormat.",3:"Fall back to number format '{key}' key with '{target}' locale.",4:"Cannot format a date value due to not supported Intl.DateTimeFormat.",5:"Fall back to datetime format '{key}' key with '{target}' locale."};function H(t,...n){return function(t,...n){return 1===n.length&&g(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),t.replace(e,((e,t)=>n.hasOwnProperty(t)?n[t]:""))}(z[t],...n)}const J="9.1.6",U=-1,q="";let K;function Z(e){K=e}let B=null;const G=e=>{B=e},Q=()=>B;let V=0;function X(e={}){const t=m(e.version)?e.version:"9.1.6",n=m(e.locale)?e.locale:"en-US",o=u(e.fallbackLocale)||h(e.fallbackLocale)||m(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:n,s=h(e.messages)?e.messages:{[n]:{}},c=h(e.datetimeFormats)?e.datetimeFormats:{[n]:{}},i=h(e.numberFormats)?e.numberFormats:{[n]:{}},d=l({},e.modifiers||{},{upper:e=>m(e)?e.toUpperCase():e,lower:e=>m(e)?e.toLowerCase():e,capitalize:e=>m(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}),b=e.pluralRules||{},_=f(e.missing)?e.missing:null,k=!p(e.missingWarn)&&!r(e.missingWarn)||e.missingWarn,w=!p(e.fallbackWarn)&&!r(e.fallbackWarn)||e.fallbackWarn,y=!!e.fallbackFormat,F=!!e.unresolving,C=f(e.postTranslation)?e.postTranslation:null,v=h(e.processor)?e.processor:null,W=!p(e.warnHtmlMessage)||e.warnHtmlMessage,$=!!e.escapeParameter,O=f(e.messageCompiler)?e.messageCompiler:K,M=f(e.onWarn)?e.onWarn:a,S=e,j=g(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,E=g(S.__numberFormatters)?S.__numberFormatters:new Map,I=g(S.__meta)?S.__meta:{};V++;return{version:t,cid:V,locale:n,fallbackLocale:o,messages:s,datetimeFormats:c,numberFormats:i,modifiers:d,pluralRules:b,missing:_,missingWarn:k,fallbackWarn:w,fallbackFormat:y,unresolving:F,postTranslation:C,processor:v,warnHtmlMessage:W,escapeParameter:$,messageCompiler:O,onWarn:M,__datetimeFormatters:j,__numberFormatters:E,__meta:I}}function Y(e,t){return e instanceof RegExp?e.test(t):e}function ee(e,t){return e instanceof RegExp?e.test(t):e}function te(e,t,n,r,o){const{missing:a}=e;if(null!==a){const r=a(e,n,t,o);return m(r)?r:t}return t}function ne(e,t,n){const r=e;r.__localeChainCache||(r.__localeChainCache=new Map);let o=r.__localeChainCache.get(n);if(!o){o=[];let e=[n];for(;u(e);)e=re(o,e,t);const a=u(t)?t:h(t)?t.default?t.default:null:t;e=m(a)?[a]:a,u(e)&&re(o,e,!1),r.__localeChainCache.set(n,o)}return o}function re(e,t,n){let r=!0;for(let o=0;o<t.length&&p(r);o++){m(t[o])&&(r=oe(e,t[o],n))}return r}function oe(e,t,n){let r;const o=t.split("-");do{r=ae(e,o.join("-"),n),o.splice(-1,1)}while(o.length&&!0===r);return r}function ae(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r="!"!==t[t.length-1];const o=t.replace(/!/g,"");e.push(o),(u(n)||h(n))&&n[o]&&(r=n[o])}return r}function le(e,t,n){e.__localeChainCache=new Map,ne(e,n,t)}function se(){}function ce(e,t={}){return()=>e}function ie(e){return N(e,null,void 0)}const ue=()=>"",fe=e=>f(e);function me(e,...t){const{fallbackFormat:r,postTranslation:o,unresolving:a,fallbackLocale:l,messages:c}=e,[i,d]=ge(...t),b=(p(d.missingWarn),p(d.fallbackWarn),p(d.escapeParameter)?d.escapeParameter:e.escapeParameter),h=!!d.resolvedMessage,_=m(d.default)||p(d.default)?p(d.default)?i:d.default:r?i:"",k=r||""!==_,w=m(d.locale)?d.locale:e.locale;b&&function(e){u(e.list)?e.list=e.list.map((e=>m(e)?s(e):e)):g(e.named)&&Object.keys(e.named).forEach((t=>{m(e.named[t])&&(e.named[t]=s(e.named[t]))}))}(d);let[y,F,C]=h?[i,w,c[w]||{}]:function(e,t,n,r,o,a){const{messages:l}=e,s=ne(e,r,n);let c,i={},u=null;const p="translate";for(let n=0;n<s.length&&(c=s[n],i=l[c]||{},null===(u=v(i,t))&&(u=i[t]),!m(u)&&!f(u));n++){const n=te(e,t,c,0,p);n!==t&&(u=n)}return[u,c,i]}(e,i,w,l),W=i;if(h||m(y)||fe(y)||k&&(y=_,W=y),!(h||(m(y)||fe(y))&&m(F)))return a?-1:i;let $=!1;const O=fe(y)?y:pe(e,i,F,y,W,(()=>{$=!0}));if($)return y;const M=function(e,t,n){return t(n)}(0,O,I(function(e,t,r,o){const{modifiers:a,pluralRules:l}=e,s={locale:t,modifiers:a,pluralRules:l,messages:n=>{const o=v(r,n);if(m(o)){let r=!1;const a=pe(e,n,t,o,n,(()=>{r=!0}));return r?ue:a}return fe(o)?o:ue}};e.processor&&(s.processor=e.processor);o.list&&(s.list=o.list);o.named&&(s.named=o.named);n(o.plural)&&(s.pluralIndex=o.plural);return s}(e,F,C,d)));return o?o(M):M}function pe(e,n,r,o,a,l){const{messageCompiler:s,warnHtmlMessage:c}=e;if(fe(o)){const e=o;return e.locale=e.locale||r,e.key=e.key||n,e}const i=s(o,function(e,n,r,o,a,l){return{warnHtmlMessage:a,onError:e=>{throw l&&l(e),e},onCacheKey:e=>((e,n,r)=>t({l:e,k:n,s:r}))(n,r,e)}}(0,r,a,0,c,l));return i.locale=r,i.key=n,i.source=o,i}function ge(...e){const[t,r,a]=e,s={};if(!m(t)&&!n(t)&&!fe(t))throw Error(14);const c=n(t)?String(t):(fe(t),t);return n(r)?s.plural=r:m(r)?s.default=r:h(r)&&!o(r)?s.named=r:u(r)&&(s.list=r),n(a)?s.plural=a:m(a)?s.default=a:h(a)&&l(s,a),[c,s]}function de(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:a}=e,{__datetimeFormatters:s}=e,[c,i,u,f]=be(...t);p(u.missingWarn);p(u.fallbackWarn);const g=!!u.part,d=m(u.locale)?u.locale:e.locale,b=ne(e,a,d);if(!m(c)||""===c)return new Intl.DateTimeFormat(d).format(i);let _,k={},w=null;for(let t=0;t<b.length&&(_=b[t],k=n[_]||{},w=k[c],!h(w));t++)te(e,c,_,0,"datetime format");if(!h(w)||!m(_))return r?-1:c;let y=`${_}__${c}`;o(f)||(y=`${y}__${JSON.stringify(f)}`);let F=s.get(y);return F||(F=new Intl.DateTimeFormat(_,l({},w,f)),s.set(y,F)),g?F.formatToParts(i):F.format(i)}function be(...e){const[t,r,o,a]=e;let l,s={},c={};if(m(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw Error(16);l=new Date(t);try{l.toISOString()}catch(e){throw Error(16)}}else if("[object Date]"===b(t)){if(isNaN(t.getTime()))throw Error(15);l=t}else{if(!n(t))throw Error(14);l=t}return m(r)?s.key=r:h(r)&&(s=r),m(o)?s.locale=o:h(o)&&(c=o),h(a)&&(c=a),[s.key||"",l,s,c]}function he(e,t,n){const r=e;for(const e in n){const n=`${t}__${e}`;r.__datetimeFormatters.has(n)&&r.__datetimeFormatters.delete(n)}}function _e(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:a}=e,{__numberFormatters:s}=e,[c,i,u,f]=ke(...t);p(u.missingWarn);p(u.fallbackWarn);const g=!!u.part,d=m(u.locale)?u.locale:e.locale,b=ne(e,a,d);if(!m(c)||""===c)return new Intl.NumberFormat(d).format(i);let _,k={},w=null;for(let t=0;t<b.length&&(_=b[t],k=n[_]||{},w=k[c],!h(w));t++)te(e,c,_,0,"number format");if(!h(w)||!m(_))return r?-1:c;let y=`${_}__${c}`;o(f)||(y=`${y}__${JSON.stringify(f)}`);let F=s.get(y);return F||(F=new Intl.NumberFormat(_,l({},w,f)),s.set(y,F)),g?F.formatToParts(i):F.format(i)}function ke(...e){const[t,r,o,a]=e;let l={},s={};if(!n(t))throw Error(14);const c=t;return m(r)?l.key=r:h(r)&&(l=r),m(o)?l.locale=o:h(o)&&(s=o),h(a)&&(s=a),[l.key||"",c,l,s]}function we(e,t,n){const r=e;for(const e in n){const n=`${t}__${e}`;r.__numberFormatters.has(n)&&r.__numberFormatters.delete(n)}}export{M as DEFAULT_MESSAGE_DATA_TYPE,q as MISSING_RESOLVE_VALUE,U as NOT_REOSLVED,J as VERSION,se as clearCompileCache,he as clearDateTimeFormat,we as clearNumberFormat,ce as compileToFunction,N as createCompileError,X as createCoreContext,ie as createCoreError,I as createMessageContext,de as datetime,Q as getAdditionalMeta,T as getDevToolsHook,ne as getLocaleChain,H as getWarnMessage,W as handleFlatJson,te as handleMissing,P as initI18nDevTools,fe as isMessageFunction,Y as isTranslateFallbackWarn,ee as isTranslateMissingWarn,_e as number,F as parse,be as parseDateTimeArgs,ke as parseNumberArgs,ge as parseTranslateArgs,Z as registerMessageCompiler,v as resolveValue,G as setAdditionalMeta,L as setDevToolsHook,me as translate,A as translateDevTools,le as updateFallbackLocale};
